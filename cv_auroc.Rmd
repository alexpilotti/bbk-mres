---
output:
  html_document: default
  pdf_document: default
params:
  chain: "HL"
  data_path: !r file.path(getwd(), "data")
---
```{r warning = FALSE, message = FALSE, cache = TRUE}

if(!require("ggplot2")){
  install.packages("ggplot2")
}
library(ggplot2)
library(glue)
```

```{r cache = TRUE}
plot_cv_auroc <- function(model_name) {
  chain <- params$chain
  data_path <- params$data_path

  PT <- "pre-trained"
  FT <- "fine-tuned"

  ds1 <- read.csv(
    file.path(data_path, glue("svm_{model_name}_{chain}_PT.csv")))
  ds1$run <- PT

  ds2 <- read.csv(
    file.path(data_path, glue("svm_{model_name}_{chain}_FT.csv")))
  ds2$run <- FT

  ds2

  ds <- rbind(ds1, ds2)
  ds

  ds$color <- "red"

  level_order_x <- c(PT, FT)

  p <- ggplot(data=ds, mapping=aes(x=factor(run, level=level_order_x), y=auc, color=color)) +
  #p <- ggplot(data=ds, mapping=aes(x=reorder(run,auc), y=auc, color=color)) +
    labs(y="CV AUROC", title=model_name) +
    geom_boxplot() +
    geom_point() +
    geom_line(aes(group=X), color="grey", linetype="solid", size=0.5) +
    theme_minimal() +
    theme(legend.position = "none",
          plot.title = element_text(hjust=0.5, size=14, face="bold"),
          axis.title.x=element_blank(),
          axis.text.x = element_text(size=12, face="bold"),
          axis.title.y = element_text(margin=margin(0,10,0,0)))
  p
}
```

```{r cache = TRUE}
plot_cv_auroc("AntiBERTa2")
```
```{r cache = TRUE}
plot_cv_auroc("AntiBERTy")
```
```{r cache = TRUE}
plot_cv_auroc("BALM-paired")
```

```{r cache = TRUE}
plot_cv_auroc("ESM2-8M")
```

```{r cache = TRUE}
plot_cv_auroc("ESM2-35M")
```

```{r cache = TRUE}
plot_cv_auroc("ESM2-150M")
```

```{r cache = TRUE}
plot_cv_auroc("ESM2-650M")
```
```{r cache = TRUE}
plot_cv_auroc("ft-ESM2")
```
